<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Mar 19, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="The MyBatis Team" />
    <meta name="Date-Revision-yyyymmdd" content="20130319" />
    <meta http-equiv="Content-Language" content="en" />
    <title>
    MyBatis Scala API > Mapping</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MyBatis Scala API Core</h2>
                </div>
                      </div>
        <div class="pull-right">                                <a href="../../" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="http://mybatis.github.com/images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 19 March 2013</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0.1</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Reference Documentation</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Mapping</a>
          </li>
                  
      <li>
    
                          <a href="session.html" title="Session">
          <i class="none"></i>
        Session</a>
            </li>
                  
      <li>
    
                          <a href="cache.html" title="Cache">
          <i class="none"></i>
        Cache</a>
            </li>
                  
      <li>
    
                          <a href="scaladocs/index.html#org.mybatis.scala.mapping.package" title="API Docs">
          <i class="none"></i>
        API Docs</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                    
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2011 The myBatis Team

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
    <div class="section"><h2>Mapping<a name="Mapping"></a></h2>
      <p>
          <tt>org.mybatis.scala.mapping</tt> is the main package of the API, this provides all idioms needed to
          declare ResultMaps and Statements.
        </p>
      <div class="section"><h3>ResultMap<a name="ResultMap"></a></h3>
        <p>
          To declare a ResultMap, just extend ResultMap[T] and call its mapping methods in its main constructor.</p>
          <div class="source"><pre class="prettyprint">val personResultMap = new ResultMap[Person] {
    id ( property=&quot;id&quot;, column=&quot;pid&quot; )
    result ( property=&quot;name&quot; column=&quot;full_name&quot; )
}</pre></div>
        <p>
          You can define contructor args, properties, associations, collections, discriminators, ...
          Look at the scaladoc for furter details of ResultMap construction.
        </p>
        <p>
          You can declare your ResultMaps wherever you want, you will reference them later when you declare
          your mapped statements.
        </p>
      </div>

      <div class="section"><h3>Mapped Statements<a name="Mapped_Statements"></a></h3>
        <p>
          There are four types of Mapped Statements as you know: Select, Insert, Update and Delete. But Select is
          a special case with three subtypes: SelectOne, SelectList and SelectMap.
        </p>
        <p>
          To define/declare a mapped statement you just have to extend one of the Statement types and set the
          desired properties.
        </p>
      </div>

      <div class="section"><h3>Select<a name="Select"></a></h3>
        <p>
          For example, if you want to select a User by its id:
        </p>
          <div class="source"><pre class="prettyprint">val findUserById = new SelectOneBy[Int,User] {
    def xsql = &lt;xsql&gt;SELECT * from user WHERE id = {&quot;id&quot;?}&lt;/xsql&gt;
}

// this is also valid
val findUserById = new SelectOneBy[Int,User] {
    def xsql =
        &lt;xsql&gt;
            SELECT *
            FROM user
            WHERE id = {&quot;id&quot;?}
        &lt;/xsql&gt;
}</pre></div>
        <p>
          You can also select a list of users filtered by its name
        </p>
          <div class="source"><pre class="prettyprint">val findUsers = new SelectListBy[String,User] {
    def xsql =
        &lt;xsql&gt;
            SELECT *
            FROM user
            WHERE name LIKE {&quot;name&quot;?}
        &lt;/xsql&gt;
}</pre></div>
    </div>

    <div class="section"><h3>Insert, Update, Delete<a name="Insert_Update_Delete"></a></h3>
        <p>
          The same applies to these statement types, just extends and define.
        </p>
        <p>
          Example
        </p>
            <div class="source"><pre class="prettyprint">val insertNewUser = new Insert[User] {
    keyGenerator = JdbcGeneratedKey(null, &quot;id&quot;)
    def xsql =
        &lt;xsql&gt;
            INSERT INTO user(name, username, password)
            VALUES ({&quot;name&quot;?}, {&quot;username&quot;?}, {&quot;password&quot;?})
        &lt;/xsql&gt;
}</pre></div>

        <p>
          All the mapping code is disconnected, so you can put it in a static initializer (scala object)
          or wherever you want.
        </p>
      </div>
      <div class="section"><h3>Parameter binding syntax<a name="Parameter_binding_syntax"></a></h3>
        <p>
          There are two syntaxes: Textual notation and Scala notation, lets see

        </p>
        </div><div class="section"><h3>Textual notation<a name="Textual_notation"></a></h3>
        <p>
          The former mybatis notation can be used here escaping '{' and '}' chars.
          </p><div class="source"><pre class="prettyprint">
            SELECT *
            FROM ....
            WHERE field = #{{param}}
          </pre></div>
          <div class="source"><pre class="prettyprint">
            SELECT *
            FROM ....
            WHERE field = #{{param, jdbcType=VARCHAR, mode=IN}}
          </pre></div>
          In this case VARCHAR and IN are just strings that will be parsed at runtime.

        
        <p></p>
        </div><div class="section"><h3>Scala notation<a name="Scala_notation"></a></h3>
        <p>
          You can import <b>org.mybatis.scala.mapping.Binding._</b> and use the ? function. It provides
          type safety on binding attributes.
          </p><div class="source"><pre class="prettyprint">
            SELECT *
            FROM ....
            WHERE field = {&quot;param&quot;?}
          </pre></div>
          <div class="source"><pre class="prettyprint">
            SELECT *
            FROM ....
            WHERE field = {? (&quot;param&quot;, jdbcType=JdbcType.VARCHAR, mode=ModeIN, typeHandler=T[CustomTHandler]) }
          </pre></div>
          In this case JdbcType.VARCHAR and ModeIN are true object references and CustomTHandler is a type reference, so they will be checked at compile time.

        
      </div>  
    </div>
  

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2010-2013
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
